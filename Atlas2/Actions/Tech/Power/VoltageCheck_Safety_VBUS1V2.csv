Function,Inputs,Outputs,Retry,RetryHandler,OnError,SubSubTest,Conditions,ReturnOnFail,Notes
Parameters,,slotNum,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Set-VBUS_OVP-6V""}",,,,,,,,"set VBUS OVP to 0.6v"
,"+{Commands=""relay_switch""}",,,,,,,,
,"+{args=""VBUS_OVP_6V;SET""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Set-VBUS-1V2""}",,,,,,,,"set VBUS to 1.2v"
,"+{Commands=""relay_switch""}",,,,,,,,
,"+{args=""ppvbus_1V2;on""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Enable-VBUS_UVP""}",,,,,,,,"enable VBUS UVP control"
,"+{Commands=""relay_switch""}",,,,,,,,
,"+{args=""VBUS_UVP_CTRL;ON""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Measure-PPVBUS_USB_EMI""}",SafetyCheck1V2,,,,,,,"measure PPVBUS voltage"
,"+{Commands=""read_voltage""}",,,,,,,,
,"+{args=""PPVBUS""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{conditionsRequired=""PASS;FAIL""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Check-VBUS_OCP_Status""}",,,,,,SafetyCheck1V2=='FAIL',,"read IBAT_OCP_Fault_Flag"
,"+{Commands=""read_gpio""}",,,,,,,,
,"+{args=""VBUS_OCP_Fault_Flag""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Check-VBUS_UVP_Status""}",,,,,,SafetyCheck1V2=='FAIL',,"read VBAT_UVP_Fault_Flag"
,"+{Commands=""read_gpio""}",,,,,,,,
,"+{args=""VBUS_UVP_Fault_Flag""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Check-VBUS_OVP_Status""}",,,,,,SafetyCheck1V2=='FAIL',,"read PPVCCMAIN_UVP_Fault_Flag"
,"+{Commands=""read_gpio""}",,,,,,,,
,"+{args=""VBUS_OVP_Fault_Flag""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Disable-VBUS_UVP""}",,,,,,,,"disable VBUS UVP control"
,"+{Commands=""relay_switch""}",,,,,,,,
,"+{args=""VBUS_UVP_CTRL;OFF""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Set-VBUS-0V""}",,,,,,,,"set VBUS to 0v"
,"+{Commands=""relay_switch""}",,,,,,,,
,"+{args=""ppvbus_1V2;off""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Connect-PPVBUS_USB_EMI_Discharge""}",,,,,,,,"VBUS Connect 10k ohm resistor to discharge"
,"+{Commands=""relay_switch""}",,,,,,,,
,"+{args=""vbus_discharge;connect""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Connect-PPVCC_MAIN_Discharge""}",,,,,,,,"PPVCC MAIN Connect 10k ohm resistor to discharge"
,"+{Commands=""relay_switch""}",,,,,,,,
,"+{args=""ppvcc_main_discharge;connect""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Connect-PPBATT_VCC_Discharge""}",,,,,,,,"VBAT Connect 10k ohm resistor to discharge"
,"+{Commands=""relay_switch""}",,,,,,,,
,"+{args=""vbatt_discharge;connect""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>delay,"{subsubtestname=""Delay-500ms""}",,,,,,,,"delay 500ms"
,"+{delay=""500""}",,,,,,,,
,"+{unit=""ms""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Disconnect-PPBATT_VCC_Discharge""}",,,,,,,,"VBAT Disconnect the 10k ohm resistor discharge"
,"+{Commands=""relay_switch""}",,,,,,,,
,"+{args=""vbatt_discharge;disconnect""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Disconnect-PPVCC_MAIN_Discharge""}",,,,,,,,"PPVCC MAIN Disconnect the 10k ohm resistor discharge"
,"+{Commands=""relay_switch""}",,,,,,,,
,"+{args=""ppvcc_main_discharge;disconnect""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Disconnect-PPVBUS_USB_EMI_Discharge""}",,,,,,,,"VBUS Disconnect the 10k ohm resistor discharge"
,"+{Commands=""relay_switch""}",,,,,,,,
,"+{args=""vbus_discharge;disconnect""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Returns,SafetyCheck1V2,,,,,,,,