Function,Inputs,Outputs,Retry,RetryHandler,OnError,SubSubTest,Conditions,ReturnOnFail,Notes
Parameters,,slotNum,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Set-PDVBUS-0V""}",,,,,,,,"Set PDVBUS to 0v"
,"+{Commands=""relay_switch""}",,,,,,,,
,"+{args=""pdvbus;off""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>delay,"{subsubtestname=""Delay-500ms""}",,,,,,,,"Delay 500ms"
,"+{delay=""500""}",,,,,,,,
,"+{unit=""ms""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Set-PPVBUS-14V""}",,,,,,,,"set PPVBUS_USB_EMI to 14v"
,"+{Commands=""relay_switch""}",,,,,,,,
,"+{args=""ppvbus14v;on""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>delay,"{subsubtestname=""Delay-1000ms""}",,,,,,,,"Delay 1000ms"
,"+{delay=""1000""}",,,,,,,,
,"+{unit=""ms""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/DUTCmd>sendCmdAndParse,"{subsubtestname=""Read-PPVBUS_PROT""}",,,,,,,,"Send-Ace_Potomac_leakage_CMD"
,"+{dutPluginName=""Kis_dut""}",,,,,,,,
,"+{channelPluginName=""Kis_channelPlugin""}",,,,,,,,
,"+{Timeout=""10""}",,,,,,,,
,"+{isparametric=""YES""}",,,,,,,,
,"+{pattern=""styx%: vbus%: ([0-9.]+) mV""}",,,,,,,,
,"+{Commands=""pmuadc --sel styx --read vbus""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/DUTCmd>sendCmdAndParse,"{subsubtestname=""Send-Ace_leakage_CMD""}",ace_result,,,,,,,"get ace value"
,"+{dutPluginName=""Kis_dut""}",,,,,,,,
,"+{channelPluginName=""Kis_channelPlugin""}",,,,,,,,
,"+{Timeout=""10""}",,,,,,,,
,"+{Commands=""ace --pick ATC0 --4cc LDCM --txdata ""0x80 0x00 0x00 0x00 0x00"";ace -r 0x6a""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/USBC>readACEVoltage,"{subsubtestname=""Read-ADCMCVBUSVoltage""}",,,,,,,,"ACE Enter S0 Status to get the ACE report Vbus voltage,capture and combine bit10bit9 and chang to decimalism,eg:493*1.5*30/4096"
,"+{pattern=""0000000%:%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*(%w+)%s*%w(%w)""}",,,,,,,,
,"+{scale=""12""}",,,,,,,,
,"+{formula=""1.5*30/2^12""}",,,,,,,,
,"+{Input=ace_result}",,,,,,,,
,"+{calmode=""*""}",,,,,,,,
,"+{InnerCall=""YES""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/USBC>readACEVoltage,"{subsubtestname=""Read-ADCMCPP5V0Voltage""}",,,,,,,,"ACE Enter S0 Status to get the ACE report PP_5V0 voltage,capture and combine bit14bit13 and chang to decimalism,eg:2886*1.5*5/4096"
,"+{pattern=""0000000%:%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*(%w+)%s*%w(%w)""}",,,,,,,,
,"+{scale=""12""}",,,,,,,,
,"+{formula=""1.5*5/2^12""}",,,,,,,,
,"+{Input=ace_result}",,,,,,,,
,"+{calmode=""*""}",,,,,,,,
,"+{InnerCall=""YES""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/USBC>readACEVoltage,"{subsubtestname=""Read-ADCMCPP5V0EXTCurrent""}",,,,,,,,"ACE Enter S0 Status to get the ACE report PP_5V0 current,capture and combine bit02bit01 and chang to decimalism,eg:10*1.5*1/4096"
,"+{pattern=""0000010%:%s*(%w+)%s*%w(%w)""}",,,,,,,,
,"+{scale=""12""}",,,,,,,,
,"+{formula=""1.5*1/2^12""}",,,,,,,,
,"+{Input=ace_result}",,,,,,,,
,"+{calmode=""*""}",,,,,,,,
,"+{InnerCall=""YES""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/USBC>readACEVoltage,"{subsubtestname=""Read-ADCMCPPHVVoltage""}",,,,,,,,"ACE Enter S0 Status to get the ACE report PP_HV voltage,capture and combine bit06bit05 and chang to decimalism,eg:5*1.5*30/4096"
,"+{pattern=""0000010%:%s*%w+%s*%w+%s*%w+%s*%w+%s*(%w+)%s*%w(%w)""}",,,,,,,,
,"+{scale=""12""}",,,,,,,,
,"+{formula=""1.5*30/2^12""}",,,,,,,,
,"+{Input=ace_result}",,,,,,,,
,"+{calmode=""*""}",,,,,,,,
,"+{InnerCall=""YES""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/USBC>readACEVoltage,"{subsubtestname=""Read-ADCMCPPHVCurrent""}",,,,,,,,"ACE Enter S0 Status to get the ACE report PP_HV current,capture and combine bit10bit09 and chang to decimalism,eg:4*1.5*1/4096"
,"+{pattern=""0000010%:%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*(%w+)%s*%w(%w)""}",,,,,,,,
,"+{scale=""12""}",,,,,,,,
,"+{formula=""1.5*1/2^12""}",,,,,,,,
,"+{Input=ace_result}",,,,,,,,
,"+{calmode=""*""}",,,,,,,,
,"+{InnerCall=""YES""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/USBC>readACEVoltage,"{subsubtestname=""Read-ADCMCPPCABLEVoltage""}",,,,,,,,"ACE Enter S0 Status to get the ACE report PP_CABLE voltage,capture and combine bit14bit13 and chang to decimalism,eg:2889*1.5*5/4096"
,"+{pattern=""0000010%:%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*(%w+)%s*%w(%w)""}",,,,,,,,
,"+{scale=""12""}",,,,,,,,
,"+{formula=""1.5*5/2^12""}",,,,,,,,
,"+{Input=ace_result}",,,,,,,,
,"+{calmode=""*""}",,,,,,,,
,"+{InnerCall=""YES""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/USBC>readACEVoltage,"{subsubtestname=""Read-ADCMCCC1Voltage""}",,,,,,,,"ACE Enter S0 Status to get the ACE report CC1_VCONN voltage,capture and combine bit02bit01 and chang to decimalism,eg:919*1.5*5/4096"
,"+{pattern=""0000020%:%s*(%w+)%s*%w(%w)""}",,,,,,,,
,"+{scale=""12""}",,,,,,,,
,"+{formula=""1.5*5/2^12""}",,,,,,,,
,"+{Input=ace_result}",,,,,,,,
,"+{calmode=""*""}",,,,,,,,
,"+{InnerCall=""YES""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/USBC>readACEVoltage,"{subsubtestname=""Read-ADCMCPPCABLECurrent""}",,,,,,,,"ACE Enter S0 Status to get the ACE report PP_CABLE current,capture and combine bit06bit05 and chang to decimalism,eg:41*1.5*1/4096"
,"+{pattern=""0000020%:%s*%w+%s*%w+%s*%w+%s*%w+%s*(%w+)%s*%w(%w)""}",,,,,,,,
,"+{Input=ace_result}",,,,,,,,
,"+{scale=""12""}",,,,,,,,
,"+{formula=""1.5*1/2^12""}",,,,,,,,
,"+{calmode=""*""}",,,,,,,,
,"+{InnerCall=""YES""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/USBC>readACEVoltage,"{subsubtestname=""Read-ADCMCCC2Voltage""}",,,,,,,,"ACE Enter S0 Status to get the ACE report CC2_VCONN voltage,capture and combine bit10bit09 and change to decimalism,eg:2899*1.5*5/4096"
,"+{pattern=""0000020%:%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*(%w+)%s*%w(%w)""}",,,,,,,,
,"+{scale=""12""}",,,,,,,,
,"+{formula=""1.5*5/2^12""}",,,,,,,,
,"+{Input=ace_result}",,,,,,,,
,"+{calmode=""*""}",,,,,,,,
,"+{InnerCall=""YES""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/USBC>readACEVoltage,"{subsubtestname=""Read-ADCMCVIN3V3Voltage""}",,,,,,,,"ACE Enter S0 Status to get the ACE report VIN_3V3 voltage,capture and combine bit14bit13 and chang to decimalism,eg:2994*1.5*3/4096"
,"+{pattern=""0000020%:%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*(%w+)%s*%w(%w)""}",,,,,,,,
,"+{scale=""12""}",,,,,,,,
,"+{formula=""1.5*3/2^12""}",,,,,,,,
,"+{Input=ace_result}",,,,,,,,
,"+{calmode=""*""}",,,,,,,,
,"+{InnerCall=""YES""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/USBC>readACEVoltage,"{subsubtestname=""Read-ADCMCVOUTLVVoltage""}",,,,,,,,"ACE Enter S0 Status to get the ACE report VOUT_LV voltage,capture and combine bit02bit01 and chang to decimalism,eg:1609*1.5*3/4096"
,"+{pattern=""0000030%:%s*(%w+)%s*%w(%w)""}",,,,,,,,
,"+{scale=""12""}",,,,,,,,
,"+{formula=""1.5*3/2^12""}",,,,,,,,
,"+{Input=ace_result}",,,,,,,,
,"+{calmode=""*""}",,,,,,,,
,"+{InnerCall=""YES""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/USBC>readACEVoltage,"{subsubtestname=""Read-ADCMCVDDIOVoltage""}",,,,,,,,"ACE Enter S0 Status to get the ACE report VDDIO voltage,capture and combine bit06bit05 and chang to decimalism,eg:1706*1.5*2/4096"
,"+{pattern=""0000030%:%s*%w+%s*%w+%s*%w+%s*%w+%s*(%w+)%s*%w(%w)""}",,,,,,,,
,"+{scale=""12""}",,,,,,,,
,"+{formula=""1.5*2/2^12""}",,,,,,,,
,"+{Input=ace_result}",,,,,,,,
,"+{calmode=""*""}",,,,,,,,
,"+{InnerCall=""YES""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Set-PPVBUS-0V""}",,,,,,,,"Set PPVBUS 0V"
,"+{Commands=""relay_switch""}",,,,,,,,
,"+{args=""ppvbus14v;off""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>delay,"{subsubtestname=""Delay-500ms_2""}",,,,,,,,"Delay 500ms"
,"+{delay=""500""}",,,,,,,,
,"+{unit=""ms""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Set-PDVBUS-5V""}",,,,,,,,"Set PDVBUS to 5v"
,"+{Commands=""relay_switch""}",,,,,,,,
,"+{args=""pdvbus;on""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Returns,ace_result,,,,,,,,