Function,Inputs,Outputs,Retry,RetryHandler,OnError,SubSubTest,Conditions,ReturnOnFail,Notes
Parameters,,MLB_Num,,,,,,,
,,Project,,,,,,,
,,slotNum,,,,,,,
Tech/DFUCommon>getLocationID,"{subsubtestname=""Get-USB_locationID""}",Location_ID,,,,,,,"get the usb location id"
,"+{Commands=""system_profiler SPUSBDataType""}",,,,,,,,
,"+{pattern=""Debug USB:[\s\S]+?Location ID: 0x0?(\S+)""}",,,,,,,,
,"+{flagIndex=""-2""}",,,,,,,,
,"+{Timeout=""10""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Set-PDVBUS-0V""}",,,,,,,,"set PDVBUS to 0v"
,"+{Commands=""relay_switch""}",,,,,,,,
,"+{args=""pdvbus;off""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>delay,"{subsubtestname=""Delay-1000ms""}",,,,,,,,"delay 1000ms"
,"+{delay=""1000""}",,,,,,,,
,"+{unit=""ms""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/DFUCommon>getMLBType,"{subsubtestname=""Get-MLB_Type""}",mlb_type,,,,,,,"check it is MLB-B or MLB-A"
,"+{mlb_a=""0x08""}",,,,,,,,
,"+{mlb_b=""0x0E;0x0A""}",,,,,,,,
,"+{ToolType=""ioreg""}",,,,,,,,
,"+{USBTool=""ioreg -liw0 -rn TADFUDevice""}",,,,,,,,
,"+{Location_ID=Location_ID}",,,,,,,,
,"+{pattern="".-BDID:(%w+)%s*""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/DFUCommon>getCFGType,"{subsubtestname=""Check-CFG_type""}",CFG_type,,,,,,,"parse SFC Board REV"
,"+{stage_pattern=""(P1)""}",DUT_stage,,,,,,,
,"+{boardRev_pattern=""[P1|P2|E|D]%w+(%d)""}",boardRev,,,,,,,
,"+{cfg_split=""2""}",dut_cfg,,,,,,,
,"+{CFG_list_path=""/Users/gdlocal/Library/Atlas2/supportFiles/CFG_list.plist""}",,,,,,,,
,"+{sfc_key=""s_build""}",,,,,,,,
,"+{MLB_Num=MLB_Num}",,,,,,,,
,"+{mlb_type=mlb_type}",,,,,,,,
,"+{cfg_type_key=""ACE_VERSION""}",,,,,,,,
,"+{stagebuild=""NPI""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Ace3OTP>decomposeSuperBinary,"{subsubtestname=""DecomposeSuperBinary""}",superBinaryFolder,,,,,,,"Decompose UARP File"
,"+{OutputDir=""/Users/gdlocal/RestorePackage""}",,,,,,,,
,"+{inputUARP=""/Users/gdlocal/RestorePackage/CurrentBundle/Restore/Firmware/Ace3/j8xx/usbcfw_j8xx.uarp""}",,,,,,,,
,"+{goldrestoreTool=""/usr/local/bin/goldrestore2""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/Common>delay,"{subsubtestname=""Delay-1000ms_1""}",,,,,,,,"delay 1000ms"
,"+{delay=""1000""}",,,,,,,,
,"+{unit=""ms""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Ace3OTP>findCorrectOTPRecordinSuperBinary,"{subsubtestname=""Get-OTP_PRE""}",payloadFilepath,,,,,,,"Check OTP Record"
,"+{Ace3_PORT=""0x00""}",deviceAddress,,,,,,,
,"+{Build_Stage=DUT_stage}",Ace3LogPath,,,,,,,
,"+{Product=Project}",Ace3_PREV,,,,,,,
,"+{CFG_type=CFG_type}",SoC_CSEC,,,,,,,
,"+{USBTool=""ioreg -liw0 -rn TADFUDevice""}",matchingRelationship,,,,,,,
,"+{usbLocation=Location_ID}",matchingRecord4CC,,,,,,,
,"+{superBinaryFolder=superBinaryFolder}",dataI2CBus,,,,,,,
,"+{record=""true""}",Ace3LUN,,,,,,,
,,SoC_CPRO,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Set-PPVBUS-14V""}",,,,,,,,"set PPVBUS_USB_EMI to 14v"
,"+{Commands=""relay_switch""}",,,,,,,,
,"+{args=""ppvbus14v;on""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>delay,"{subsubtestname=""Delay-500ms""}",,,,,,,,"delay 500ms"
,"+{delay=""500""}",,,,,,,,
,"+{unit=""ms""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Connect-ACE3_I2C""}",,,,,,,,"connect ACE3 I2C"
,"+{Commands=""relay_switch""}",,,,,,,,
,"+{args=""ACE3I2C;connect""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>delay,"{subsubtestname=""Delay-500ms_1""}",,,,,,,,"delay 500ms"
,"+{delay=""500""}",,,,,,,,
,"+{unit=""ms""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Ace3OTP>programOTP,"{subsubtestname=""ProgramOTP""}",Ace3_CRC1_I2C,,,,,,,"program ACE chip"
,"+{power=""prot""}",Ace3_CRC2_I2C,,,,,,,
,"+{attribute=""ACE3_ECID""}",Ace3_CRC3_I2C,,,,,,,
,"+{fixturePluginName=""FixturePlugin""}",Ace3_ECID,,,,,,,
,"+{dataI2CAddress=deviceAddress}",isProgramming,,,,,,,
,"+{superBinaryFolder=superBinaryFolder}",,,,,,,,
,"+{attrAce3UUID=""ACE3_UUID""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/Common>uploadAttributeToSFC,"{subsubtestname=""Upload-Ace3_ECID_SFC""}",,,,,,isProgramming == "TRUE",,"upload ACE3 ecid to SFC"
,"+{sfc_path=""/vault/data_collection/test_station_config/gh_station_info.json""}",,,,,,,,
,"+{ADD_Type=""ADD_ATTR""}",,,,,,,,
,"+{BoardRev=boardRev}",,,,,,,,
,"+{sfc_key=""ace_ecid""}",,,,,,,,
,"+{sfc_value=Ace3_ECID}",,,,,,,,
,"+{MLB_Num=MLB_Num}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Ace3OTP>checkFinalCRC,"{subsubtestname=""Compare-OTP_CRC_CRC1-Expect""}",,,,,,,,"Compare ACE3L CRC1 I2C with expect value"
,"+{attribute=""ACE3_CRC1_I2C""}",,,,,,,,
,"+{expect=""0x98 0x2F 0x86 0xBF""}",,,,,,,,
,"+{crcValue=Ace3_CRC1_I2C}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/Ace3OTP>checkFinalCRC,"{subsubtestname=""Compare-OTP_CRC_CRC2-Expect""}",,,,,,Project == 'J817' and mlb_type == 'MLB_B' and SoC_CSEC == '0' and SoC_CPRO == '0',,"check ace otp crc2(J817 A06 MLB_B)"
,"+{attribute=""ACE3_CRC2_I2C""}",,,,,,,,
,"+{expect=""0x1E 0x28 0xF1 0x57""}",,,,,,,,
,"+{crcValue=Ace3_CRC2_I2C}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/Ace3OTP>checkFinalCRC,"{subsubtestname=""Compare-OTP_CRC_CRC2-Expect""}",,,,,,Project == 'J817' and mlb_type == 'MLB_A' and SoC_CSEC == '0' and SoC_CPRO == '0',,"check ace otp crc2(J817 A06 MLB_A)"
,"+{attribute=""ACE3_CRC2_I2C""}",,,,,,,,
,"+{expect=""0xFF 0x2D 0x55 0x91""}",,,,,,,,
,"+{crcValue=Ace3_CRC2_I2C}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/Ace3OTP>checkFinalCRC,"{subsubtestname=""Compare-OTP_CRC_CRC2-Expect""}",,,,,,Project == 'J817' and mlb_type == 'MLB_B' and SoC_CSEC == '1' and SoC_CPRO == '0',,"check ace otp crc2(J817 A09 MLB_B)"
,"+{attribute=""ACE3_CRC2_I2C""}",,,,,,,,
,"+{expect=""0x4D 0x1F 0xF3 0x33""}",,,,,,,,
,"+{crcValue=Ace3_CRC2_I2C}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/Ace3OTP>checkFinalCRC,"{subsubtestname=""Compare-OTP_CRC_CRC2-Expect""}",,,,,,Project == 'J817' and mlb_type == 'MLB_A' and SoC_CSEC == '1' and SoC_CPRO == '0',,"check ace otp crc2(J817 A09 MLB_A)"
,"+{attribute=""ACE3_CRC2_I2C""}",,,,,,,,
,"+{expect=""0xAC 0x1A 0x57 0xF5""}",,,,,,,,
,"+{crcValue=Ace3_CRC2_I2C}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/Ace3OTP>checkFinalCRC,"{subsubtestname=""Compare-OTP_CRC_CRC2-Expect""}",,,,,,Project == 'J817' and mlb_type == 'MLB_B' and SoC_CSEC == '1' and SoC_CPRO == '1',,"check ace otp crc2(J817 A12 MLB_B)"
,"+{attribute=""ACE3_CRC2_I2C""}",,,,,,,,
,"+{expect=""0xDD 0x47 0x6C 0x15""}",,,,,,,,
,"+{crcValue=Ace3_CRC2_I2C}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/Ace3OTP>checkFinalCRC,"{subsubtestname=""Compare-OTP_CRC_CRC2-Expect""}",,,,,,Project == 'J817' and mlb_type == 'MLB_A' and SoC_CSEC == '1' and SoC_CPRO == '1',,"check ace otp crc2(J817 A12 MLB_A)"
,"+{attribute=""ACE3_CRC2_I2C""}",,,,,,,,
,"+{expect=""0x3C 0x42 0xC8 0xD3""}",,,,,,,,
,"+{crcValue=Ace3_CRC2_I2C}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/Ace3OTP>checkFinalCRC,"{subsubtestname=""Compare-OTP_CRC_CRC2-Expect""}",,,,,,Project == 'J820' and mlb_type == 'MLB_B' and SoC_CSEC == '0' and SoC_CPRO == '0',,"check ace otp crc2(J820 A06 MLB_B)"
,"+{attribute=""ACE3_CRC2_I2C""}",,,,,,,,
,"+{expect=""0xA6 0xB2 0xEA 0xA4""}",,,,,,,,
,"+{crcValue=Ace3_CRC2_I2C}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/Ace3OTP>checkFinalCRC,"{subsubtestname=""Compare-OTP_CRC_CRC2-Expect""}",,,,,,Project == 'J820' and mlb_type == 'MLB_A' and SoC_CSEC == '0' and SoC_CPRO == '0',,"check ace otp crc2(J820 A06 MLB_A)"
,"+{attribute=""ACE3_CRC2_I2C""}",,,,,,,,
,"+{expect=""0x47 0xB7 0x4E 0x62""}",,,,,,,,
,"+{crcValue=Ace3_CRC2_I2C}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/Ace3OTP>checkFinalCRC,"{subsubtestname=""Compare-OTP_CRC_CRC2-Expect""}",,,,,,Project == 'J820' and mlb_type == 'MLB_B' and SoC_CSEC == '1' and SoC_CPRO == '0',,"check ace otp crc2(J820 A09 MLB_B)"
,"+{attribute=""ACE3_CRC2_I2C""}",,,,,,,,
,"+{expect=""0x66 0x93 0xC1 0xD2""}",,,,,,,,
,"+{crcValue=Ace3_CRC2_I2C}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/Ace3OTP>checkFinalCRC,"{subsubtestname=""Compare-OTP_CRC_CRC2-Expect""}",,,,,,Project == 'J820' and mlb_type == 'MLB_A' and SoC_CSEC == '1' and SoC_CPRO == '0',,"check ace otp crc2(J820 A09 MLB_A)"
,"+{attribute=""ACE3_CRC2_I2C""}",,,,,,,,
,"+{expect=""0x87 0x96 0x65 0x14""}",,,,,,,,
,"+{crcValue=Ace3_CRC2_I2C}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/Ace3OTP>checkFinalCRC,"{subsubtestname=""Compare-OTP_CRC_CRC2-Expect""}",,,,,,Project == 'J820' and mlb_type == 'MLB_B' and SoC_CSEC == '1' and SoC_CPRO == '1',,"check ace otp crc2(J820 A12 MLB_B)"
,"+{attribute=""ACE3_CRC2_I2C""}",,,,,,,,
,"+{expect=""0xF6 0xCB 0x5E 0xF4""}",,,,,,,,
,"+{crcValue=Ace3_CRC2_I2C}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/Ace3OTP>checkFinalCRC,"{subsubtestname=""Compare-OTP_CRC_CRC2-Expect""}",,,,,,Project == 'J820' and mlb_type == 'MLB_A' and SoC_CSEC == '1' and SoC_CPRO == '1',,"check ace otp crc2(J820 A12 MLB_A)"
,"+{attribute=""ACE3_CRC2_I2C""}",,,,,,,,
,"+{expect=""0x17 0xCE 0xFA 0x32""}",,,,,,,,
,"+{crcValue=Ace3_CRC2_I2C}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/Ace3OTP>checkFinalCRC,"{subsubtestname=""Compare-OTP_CRC_CRC3-Expect""}",,,,,,,,"Check OTP CRC3"
,"+{attribute=""ACE3_CRC3_I2C""}",,,,,,,,
,"+{crcValue=Ace3_CRC3_I2C}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Disconnect-ACE3_I2C""}",,,,,,,,"disconnect ACE3 I2C"
,"+{Commands=""relay_switch""}",,,,,,,,
,"+{args=""ACE3I2C;disconnect""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Set-PPVBUS-0V""}",,,,,,,,"Set PPVBUS 0V"
,"+{Commands=""relay_switch""}",,,,,,,,
,"+{args=""ppvbus14v;off""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>uploadAttributeToSFC,"{subsubtestname=""Upload-ACE_OTP_CRC1""}",sfc_url,,,,,,,"upload ACE_OTP_CRC to SFC"
,"+{MLB_Num=MLB_Num}",,,,,,,,
,"+{sfc_value=Ace3_CRC1_I2C}",,,,,,,,
,"+{sfc_key=""ACE3_CRC1_I2C""}",,,,,,,,
,"+{ADD_Type=""ADD_ATTR""}",,,,,,,,
,"+{sfc_path=""/vault/data_collection/test_station_config/gh_station_info.json""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>uploadAttributeToSFC,"{subsubtestname=""Upload-ACE_OTP_CRC2""}",,,,,,,,"upload ACE_OTP_CRC to SFC"
,"+{MLB_Num=MLB_Num}",,,,,,,,
,"+{sfc_value=Ace3_CRC2_I2C}",,,,,,,,
,"+{sfc_key=""ACE3_CRC2_I2C""}",,,,,,,,
,"+{ADD_Type=""ADD_ATTR""}",,,,,,,,
,"+{sfc_path=""/vault/data_collection/test_station_config/gh_station_info.json""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>uploadAttributeToSFC,"{subsubtestname=""Upload-ACE_OTP_CRC3""}",,,,,,,,"upload ACE_OTP_CRC to SFC"
,"+{MLB_Num=MLB_Num}",,,,,,,,
,"+{sfc_value=Ace3_CRC3_I2C}",,,,,,,,
,"+{sfc_key=""ACE3_CRC3_I2C""}",,,,,,,,
,"+{ADD_Type=""ADD_ATTR""}",,,,,,,,
,"+{sfc_path=""/vault/data_collection/test_station_config/gh_station_info.json""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Process>compareSfcEcidCode,"{subsubtestname=""Compare-Ace3_ECID""}",,,,,,,,"compare Ace3 ECID Local and Ace3 ECID SFC"
,"+{sfc_Url=sfc_url}",,,,,,,,
,"+{sn=MLB_Num}",,,,,,,,
,"+{sfc_key=""ace_ecid""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Returns,Location_ID,,,,,,,,
,mlb_type,,,,,,,,
,CFG_type,,,,,,,,
,DUT_stage,,,,,,,,
,boardRev,,,,,,,,
,dut_cfg,,,,,,,,
,superBinaryFolder,,,,,,,,
,payloadFilepath,,,,,,,,
,deviceAddress,,,,,,,,
,Ace3LogPath,,,,,,,,
,Ace3_PREV,,,,,,,,
,SoC_CSEC,,,,,,,,
,matchingRelationship,,,,,,,,
,matchingRecord4CC,,,,,,,,
,dataI2CBus,,,,,,,,
,Ace3LUN,,,,,,,,
,SoC_CPRO,,,,,,,,
,Ace3_CRC1_I2C,,,,,,,,
,Ace3_CRC2_I2C,,,,,,,,
,Ace3_CRC3_I2C,,,,,,,,
,Ace3_ECID,,,,,,,,
,isProgramming,,,,,,,,
,sfc_url,,,,,,,,
