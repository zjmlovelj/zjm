Function,Inputs,Outputs,Retry,RetryHandler,OnError,SubSubTest,Conditions,ReturnOnFail,Notes
Parameters,,MLB_Num,,,,,,,
,,Project,,,,,,,
,,slotNum,,,,,,,
Tech/DFUCommon>getLocationID,"{subsubtestname=""Get-USB_locationID""}",Location_ID,,,,,,,"get the usb location id"
,"+{Commands=""system_profiler SPUSBDataType""}",,,,,,,,
,"+{pattern=""Debug USB:[\s\S]+?Location ID: 0x0?(\S+)""}",,,,,,,,
,"+{flagIndex=""-2""}",,,,,,,,
,"+{Timeout=""10""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Set-PDVBUS-0V""}",,,,,,,,"set PDVBUS to 0v"
,"+{Commands=""relay_switch""}",,,,,,,,
,"+{args=""pdvbus;off""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/DFUCommon>getMLBType,"{subsubtestname=""Get-MLB_Type""}",mlb_type,,,,,,,"check it is MLB-B or MLB-A"
,"+{mlb_a=""0x08;0x0C""}",,,,,,,,
,"+{mlb_b=""0x0E;0x0A""}",,,,,,,,
,"+{ToolType=""ioreg""}",,,,,,,,
,"+{USBTool=""ioreg -liw0 -rn TADFUDevice""}",,,,,,,,
,"+{Location_ID=Location_ID}",,,,,,,,
,"+{pattern="".-BDID:(%w+)%s*""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/DFUCommon>getCFGType,"{subsubtestname=""Check-CFG_type""}",CFG_type,,,,,,,"parse SFC Board REV"
,"+{stage_pattern=""(P1)""}",DUT_stage,,,,,,,
,"+{boardRev_pattern=""[P1|P2|E|D]%w+(%d)""}",boardRev,,,,,,,
,"+{cfg_split=""2""}",dut_cfg,,,,,,,
,"+{CFG_list_path=""/Users/gdlocal/Library/Atlas2/supportFiles/CFG_list.plist""}",,,,,,,,
,"+{sfc_key=""s_build""}",,,,,,,,
,"+{MLB_Num=MLB_Num}",,,,,,,,
,"+{mlb_type=mlb_type}",,,,,,,,
,"+{cfg_type_key=""ACE_VERSION""}",,,,,,,,
,"+{stagebuild=""NPI""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Ace3OTP>decomposeSuperBinary,"{subsubtestname=""DecomposeSuperBinary""}",superBinaryFolder,,,,,,,"Decompose UARP File"
,"+{OutputDir=""/Users/gdlocal/RestorePackage""}",,,,,,,,
,"+{inputUARP=""/Users/gdlocal/RestorePackage/CurrentBundle/Restore/Firmware/Ace3/j8xx/usbcfw_j8xx.uarp""}",,,,,,,,
,"+{goldrestoreTool=""/usr/local/bin/goldrestore2""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>delay,"{subsubtestname=""Delay-100ms""}",,,,,,,,"delay 100ms"
,"+{delay=""100""}",,,,,,,,
,"+{unit=""ms""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Ace3OTP>findCorrectOTPRecordinSuperBinary,"{subsubtestname=""Get-OTP_PRE""}",payloadFilepath,,,,,,,"Check OTP Record"
,"+{Ace3_PORT=""0x00""}",deviceAddress,,,,,,,
,"+{Build_Stage=DUT_stage}",Ace3LogPath,,,,,,,
,"+{Product=Project}",Ace3_PREV,,,,,,,
,"+{CFG_type=CFG_type}",SoC_CSEC,,,,,,,
,"+{USBTool=""ioreg -liw0 -rn TADFUDevice""}",matchingRelationship,,,,,,,
,"+{usbLocation=Location_ID}",matchingRecord4CC,,,,,,,
,"+{superBinaryFolder=superBinaryFolder}",dataI2CBus,,,,,,,
,"+{record=""false""}",Ace3LUN,,,,,,,
,,SoC_CPRO,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Set-PPVBUS_PORT-14V""}",,,,,,,,"set PPVBUS_PORT to 14v"
,"+{Commands=""relay_switch""}",,,,,,,,
,"+{args=""ppvbus14v;on""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>delay,"{subsubtestname=""Delay-500ms""}",,,,,,,,"delay 500ms"
,"+{delay=""500""}",,,,,,,,
,"+{unit=""ms""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Connect-ACE3_I2C""}",,,,,,,,"connect ACE3 I2C"
,"+{Commands=""relay_switch""}",,,,,,,,
,"+{args=""ACE3I2C;connect""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>delay,"{subsubtestname=""Delay-500ms_1""}",,,,,,,,"delay 500ms"
,"+{delay=""500""}",,,,,,,,
,"+{unit=""ms""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Ace3OTP>programOTP,"{subsubtestname=""Send-Program-Action""}",Ace3_CRC1_I2C,,,,,,,"program ACE chip by fixture"
,"+{power=""prot""}",Ace3_CRC2_I2C,,,,,,,
,"+{attribute=""ACE3_ECID""}",Ace3_CRC3_I2C,,,,,,,
,"+{fixturePluginName=""FixturePlugin""}",Ace3_ECID,,,,,,,
,"+{dataI2CAddress=deviceAddress}",isProgramming,,,,,,,
,"+{superBinaryFolder=superBinaryFolder}",,,,,,,,
,"+{attrAce3UUID=""ACE3_UUID""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>uploadAttributeToSFC,"{subsubtestname=""Get-Ace3_ECID""}",,,,,,isProgramming == "TRUE",,"upload ACE3 ecid to attribut and SFC"
,"+{sfc_path=""/vault/data_collection/test_station_config/gh_station_info.json""}",,,,,,,,
,"+{ADD_Type=""ADD_ATTR""}",,,,,,,,
,"+{BoardRev=boardRev}",,,,,,,,
,"+{sfc_key=""ace_ecid""}",,,,,,,,
,"+{sfc_value=Ace3_ECID}",,,,,,,,
,"+{MLB_Num=MLB_Num}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/DUTCmd>getInputValue,"{subsubtestname=""Compare-I2C_CRC1-Bin_CRC1""}",,,,,,,,"Compare ACE3 I2C read CRC1 and Bin file CRC1 result"
,"+{attribute=""ACE3_CRC1_I2C""}",,,,,,,,
,"+{Input=Ace3_CRC1_I2C}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/DUTCmd>getInputValue,"{subsubtestname=""Compare-I2C_CRC2-Bin_CRC2""}",,,,,,,,"Compare ACE3 I2C read CRC2 and Bin file CRC2 result"
,"+{attribute=""ACE3_CRC2_I2C""}",,,,,,,,
,"+{Input=Ace3_CRC2_I2C}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/DUTCmd>getInputValue,"{subsubtestname=""Compare-I2C_CRC3-Bin_CRC3""}",,,,,,,,"Compare ACE3 I2C read CRC3 and Bin file CRC3 result"
,"+{attribute=""ACE3_CRC3_I2C""}",,,,,,,,
,"+{Input=Ace3_CRC3_I2C}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Disconnect-ACE3_I2C""}",,,,,,,,"disconnect ACE3 I2C"
,"+{Commands=""relay_switch""}",,,,,,,,
,"+{args=""ACE3I2C;disconnect""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Set-PPVBUS_PORT-0V""}",,,,,,,,"Remove the PPVBUS_PORT 14v from DUT"
,"+{Commands=""relay_switch""}",,,,,,,,
,"+{args=""ppvbus14v;off""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>uploadAttributeToSFC,"{subsubtestname=""Get-ACE_OTP_CRC1""}",sfc_url,,,,,,,"get ACE_OTP_CRC1 and upload to SFC"
,"+{MLB_Num=MLB_Num}",,,,,,,,
,"+{sfc_value=Ace3_CRC1_I2C}",,,,,,,,
,"+{sfc_key=""ACE3_CRC1_I2C""}",,,,,,,,
,"+{ADD_Type=""ADD_ATTR""}",,,,,,,,
,"+{sfc_path=""/vault/data_collection/test_station_config/gh_station_info.json""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>uploadAttributeToSFC,"{subsubtestname=""Get-ACE_OTP_CRC2""}",,,,,,,,"get ACE_OTP_CRC2 and upload to SFC"
,"+{MLB_Num=MLB_Num}",,,,,,,,
,"+{sfc_value=Ace3_CRC2_I2C}",,,,,,,,
,"+{sfc_key=""ACE3_CRC2_I2C""}",,,,,,,,
,"+{ADD_Type=""ADD_ATTR""}",,,,,,,,
,"+{sfc_path=""/vault/data_collection/test_station_config/gh_station_info.json""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>uploadAttributeToSFC,"{subsubtestname=""Get-ACE_OTP_CRC3""}",,,,,,,,"get ACE_OTP_CRC3 and upload to SFC"
,"+{MLB_Num=MLB_Num}",,,,,,,,
,"+{sfc_value=Ace3_CRC3_I2C}",,,,,,,,
,"+{sfc_key=""ACE3_CRC3_I2C""}",,,,,,,,
,"+{ADD_Type=""ADD_ATTR""}",,,,,,,,
,"+{sfc_path=""/vault/data_collection/test_station_config/gh_station_info.json""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Process>compareSfcEcidCode,"{subsubtestname=""Compare-Ace3_ECID-SFC""}",,,,,,DUT_stage == "MP",,"compare Ace3 ECID Local and Ace3 ECID SFC"
,"+{sfc_Url=sfc_url}",,,,,,,,
,"+{sn=MLB_Num}",,,,,,,,
,"+{sfc_key=""ace_ecid""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Returns,Location_ID,,,,,,,,
,mlb_type,,,,,,,,
,CFG_type,,,,,,,,
,DUT_stage,,,,,,,,
,boardRev,,,,,,,,
,dut_cfg,,,,,,,,
,superBinaryFolder,,,,,,,,
,payloadFilepath,,,,,,,,
,deviceAddress,,,,,,,,
,Ace3LogPath,,,,,,,,
,Ace3_PREV,,,,,,,,
,SoC_CSEC,,,,,,,,
,matchingRelationship,,,,,,,,
,matchingRecord4CC,,,,,,,,
,dataI2CBus,,,,,,,,
,Ace3LUN,,,,,,,,
,SoC_CPRO,,,,,,,,
,Ace3_CRC1_I2C,,,,,,,,
,Ace3_CRC2_I2C,,,,,,,,
,Ace3_CRC3_I2C,,,,,,,,
,Ace3_ECID,,,,,,,,
,isProgramming,,,,,,,,
,sfc_url,,,,,,,,
