Function,Inputs,Outputs,Retry,RetryHandler,OnError,SubSubTest,Conditions,ReturnOnFail,Notes
Parameters,,slotNum,,,,,,,
Tech/Fixture>sendFixtureCommand,"{subsubtestname=""Set-PDVBUS-5V""}",,,,,,,,"Set PDVBUS to 5v"
,"+{Commands=""relay_switch""}",,,,,,,,
,"+{args=""pdvbus;on""}",,,,,,,,
,"+{slotNum=slotNum}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/DUTCmd>sendCmdAndParse,"{subsubtestname=""Send-ACE_Enter_S0_CMD""}",,,,,,,,"ACE Enter S0 Status,rdar://112808243"
,"+{dutPluginName=""Kis_dut""}",,,,,,,,
,"+{channelPluginName=""Kis_channelPlugin""}",,,,,,,,
,"+{Timeout=""10""}",,,,,,,,
,"+{Commands=""ace --pick ATC0 --4cc SSPS --txdata ""0x00"" --rxdata 0;ace --pick ATC0 --4cc SRDY --txdata ""0x00"" --rxdata 0""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>delay,"{subsubtestname=""Delay-1000ms""}",,,,,,,,"Delay 1000ms"
,"+{delay=""1000""}",,,,,,,,
,"+{unit=""ms""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/DUTCmd>sendCmdAndParse,"{subsubtestname=""Disable-BMSQ""}",,,,,,,,"Disable_BMSQ"
,"+{dutPluginName=""Kis_dut""}",,,,,,,,
,"+{channelPluginName=""Kis_channelPlugin""}",,,,,,,,
,"+{expect=""OK""}",,,,,,,,
,"+{Timeout=""10""}",,,,,,,,
,"+{Commands=""smc write BMSQ 1 0 0 0""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>delay,"{subsubtestname=""Delay-1000ms_1""}",,,,,,,,"Delay 1000ms"
,"+{delay=""1000""}",,,,,,,,
,"+{unit=""ms""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/DUTCmd>sendCmdAndParse,"{subsubtestname=""Enable-SRYR""}",,,,,,,,"Enable SRYR"
,"+{dutPluginName=""Kis_dut""}",,,,,,,,
,"+{channelPluginName=""Kis_channelPlugin""}",,,,,,,,
,"+{Timeout=""10""}",,,,,,,,
,"+{Commands=""ace --pick ATC0 --4cc SRYR --txdata ""0x00"" --rxdata 0""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>delay,"{subsubtestname=""Delay-4000ms""}",,,,,,,,"Delay 4000ms"
,"+{delay=""4000""}",,,,,,,,
,"+{unit=""ms""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/DUTCmd>sendCmdAndParse,"{subsubtestname=""Send-Ace_leakage_CMD""}",ace_result,,,,,,,"get ace value"
,"+{dutPluginName=""Kis_dut""}",,,,,,,,
,"+{channelPluginName=""Kis_channelPlugin""}",,,,,,,,
,"+{Timeout=""10""}",,,,,,,,
,"+{Commands=""ace --pick ATC0 --4cc LDCM --txdata ""0x80 0x00 0x00 0x00 0x00"";ace -r 0x6a""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/USBC>readACEVoltage,"{subsubtestname=""Read-ADCMCVBUSVoltage""}",,,,,,,,"Put pdvbus on and distoggle CC to get the ACE report Vbus voltage"
,"+{pattern=""0000000%:%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*(%w+)%s*%w(%w)""}",,,,,,,,
,"+{scale=""12""}",,,,,,,,
,"+{formula=""1.5*30/2^12""}",,,,,,,,
,"+{Input=ace_result}",,,,,,,,
,"+{calmode=""*""}",,,,,,,,
,"+{InnerCall=""YES""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/USBC>readACEVoltage,"{subsubtestname=""Read-ADCMCPP5V0Voltage""}",,,,,,,,"Put pdvbus on and distoggle CC to get the ACE report PP_5V0 voltage"
,"+{pattern=""0000000%:%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*(%w+)%s*%w(%w)""}",,,,,,,,
,"+{scale=""12""}",,,,,,,,
,"+{formula=""1.5*5/2^12""}",,,,,,,,
,"+{Input=ace_result}",,,,,,,,
,"+{calmode=""*""}",,,,,,,,
,"+{InnerCall=""YES""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/USBC>readACEVoltage,"{subsubtestname=""Read-ADCMCPP5V0EXTCurrent""}",,,,,,,,"Put pdvbus on and distoggle CC to get the ACE report PP_5V0 current"
,"+{pattern=""0000010%:%s*(%w+)%s*%w(%w)""}",,,,,,,,
,"+{scale=""12""}",,,,,,,,
,"+{formula=""1.5*1/2^12""}",,,,,,,,
,"+{Input=ace_result}",,,,,,,,
,"+{calmode=""*""}",,,,,,,,
,"+{InnerCall=""YES""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/USBC>readACEVoltage,"{subsubtestname=""Read-ADCMCPPHVVoltage""}",,,,,,,,"Put pdvbus on and distoggle CC to get the ACE report PP_HV voltage"
,"+{pattern=""0000010%:%s*%w+%s*%w+%s*%w+%s*%w+%s*(%w+)%s*%w(%w)""}",,,,,,,,
,"+{scale=""12""}",,,,,,,,
,"+{formula=""1.5*30/2^12""}",,,,,,,,
,"+{Input=ace_result}",,,,,,,,
,"+{calmode=""*""}",,,,,,,,
,"+{InnerCall=""YES""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/USBC>readACEVoltage,"{subsubtestname=""Read-ADCMCPPHVCurrent""}",,,,,,,,"Put pdvbus on and distoggle CC to get the ACE report PP_HV current"
,"+{pattern=""0000010%:%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*(%w+)%s*%w(%w)""}",,,,,,,,
,"+{scale=""12""}",,,,,,,,
,"+{formula=""1.5*1/2^12""}",,,,,,,,
,"+{Input=ace_result}",,,,,,,,
,"+{calmode=""*""}",,,,,,,,
,"+{InnerCall=""YES""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/USBC>readACEVoltage,"{subsubtestname=""Read-ADCMCPPCABLEVoltage""}",,,,,,,,"Put pdvbus on and distoggle CC to get the ACE report PP_CABLE voltage"
,"+{pattern=""0000010%:%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*(%w+)%s*%w(%w)""}",,,,,,,,
,"+{scale=""12""}",,,,,,,,
,"+{formula=""1.5*5/2^12""}",,,,,,,,
,"+{Input=ace_result}",,,,,,,,
,"+{calmode=""*""}",,,,,,,,
,"+{InnerCall=""YES""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/USBC>readACEVoltage,"{subsubtestname=""Read-ADCMCCC1Voltage""}",,,,,,,,"Put pdvbus on and distoggle CC to get the ACE report CC1_VCONN voltage"
,"+{pattern=""0000020%:%s*(%w+)%s*%w(%w)""}",,,,,,,,
,"+{scale=""12""}",,,,,,,,
,"+{formula=""1.5*5/2^12""}",,,,,,,,
,"+{Input=ace_result}",,,,,,,,
,"+{calmode=""*""}",,,,,,,,
,"+{InnerCall=""YES""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/USBC>readACEVoltage,"{subsubtestname=""Read-ADCMCPPCABLECurrent""}",,,,,,,,"Put pdvbus on and distoggle CC to get the ACE report PP_CABLE current"
,"+{pattern=""0000020%:%s*%w+%s*%w+%s*%w+%s*%w+%s*(%w+)%s*%w(%w)""}",,,,,,,,
,"+{Input=ace_result}",,,,,,,,
,"+{scale=""12""}",,,,,,,,
,"+{formula=""1.5*1/2^12""}",,,,,,,,
,"+{calmode=""*""}",,,,,,,,
,"+{InnerCall=""YES""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/USBC>readACEVoltage,"{subsubtestname=""Read-ADCMCCC2Voltage""}",,,,,,,,"Put pdvbus on and distoggle CC to get the ACE report CC2_VCONN voltage"
,"+{pattern=""0000020%:%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*(%w+)%s*%w(%w)""}",,,,,,,,
,"+{scale=""12""}",,,,,,,,
,"+{formula=""1.5*5/2^12""}",,,,,,,,
,"+{Input=ace_result}",,,,,,,,
,"+{calmode=""*""}",,,,,,,,
,"+{InnerCall=""YES""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/USBC>readACEVoltage,"{subsubtestname=""Read-ADCMCVIN3V3Voltage""}",,,,,,,,"Put pdvbus on and distoggle CC to get the ACE report VIN_3V3 voltage"
,"+{pattern=""0000020%:%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*%w+%s*(%w+)%s*%w(%w)""}",,,,,,,,
,"+{scale=""12""}",,,,,,,,
,"+{formula=""1.5*3/2^12""}",,,,,,,,
,"+{Input=ace_result}",,,,,,,,
,"+{calmode=""*""}",,,,,,,,
,"+{InnerCall=""YES""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/USBC>readACEVoltage,"{subsubtestname=""Read-ADCMCVOUTLVVoltage""}",,,,,,,,"Put pdvbus on and distoggle CC to get the ACE report VOUT_LV voltage"
,"+{pattern=""0000030%:%s*(%w+)%s*%w(%w)""}",,,,,,,,
,"+{scale=""12""}",,,,,,,,
,"+{formula=""1.5*3/2^12""}",,,,,,,,
,"+{Input=ace_result}",,,,,,,,
,"+{calmode=""*""}",,,,,,,,
,"+{InnerCall=""YES""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Tech/USBC>readACEVoltage,"{subsubtestname=""Read-ADCMCVDDIOVoltage""}",,,,,,,,"Put pdvbus on and distoggle CC to get the ACE report VDDIO voltage"
,"+{pattern=""0000030%:%s*%w+%s*%w+%s*%w+%s*%w+%s*(%w+)%s*%w(%w)""}",,,,,,,,
,"+{scale=""12""}",,,,,,,,
,"+{formula=""1.5*2/2^12""}",,,,,,,,
,"+{Input=ace_result}",,,,,,,,
,"+{calmode=""*""}",,,,,,,,
,"+{InnerCall=""YES""}",,,,,,,,
,"+{record=""true""}",,,,,,,,
Returns,ace_result,,,,,,,,
