Function,Inputs,Outputs,Retry,RetryHandler,OnError,SubSubTest,Conditions,ReturnOnFail,Notes
Parameters,,BOARD_ID,,,,,,,
,,MLB_Num,,,,,,,
,,sfc_url,,,,,,,
,,MEMORY_SIZE,,,,,,,
,,SbinKey,,,,,,,
,,bin_fuse,,,,,,,
,,fuse_rev,,,,,,,
,,Pcore_status,,,,,,,
Tech/DUTCmd>sendCmdAndParse,"{subsubtestname=""Read-UID""}",nanduid_resp,,,,,,,"reading the NANDUID"
,"+{dutPluginName=""Kis_dut""}",,,,,,,,
,"+{channelPluginName=""Kis_channelPlugin""}",,,,,,,,
,"+{Timeout=""3""}",,,,,,,,
,"+{Commands=""nanduid""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Parser>parseInfo,"{subsubtestname=""Read-Parse_MSP""}",NAND_Total_Controller_Count,,,,,,,"Parse and create MSP_[i]_CH_[i]_Die_[i] records"
,"+{Name=""NAND_UID_""}",,,,,,,,
,"+{Input=nanduid_resp}",,,,,,,,
,"+{bit=""25;3""}",,,,,,,,
,"+{attributeControllerName=""NAND_Total_Controller_Count""}",,,,,,,,
,"+{attributeDieName=""NAND_Total_Die_Count""}",,,,,,,,
,"+{pattern=""MSP %d+ CH %d+ Die %d+:%s[0-9A-F ]+""}",,,,,,,,
,"+{attributePattern=""MSP%s(%d*)""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/DUTCmd>sendCmdAndParse,"{subsubtestname=""Read-NAND_CSID""}",csid_result,,,,,,,"read NAND csid"
,"+{dutPluginName=""Kis_dut""}",nandcsid_resp,,,,,,,
,"+{channelPluginName=""Kis_channelPlugin""}",,,,,,,,
,"+{pattern=""NANDID %= ([0-9A-Za-z]+);""}",,,,,,,,
,"+{expect=""match""}",,,,,,,,
,"+{Timeout=""10""}",,,,,,,,
,"+{Commands=""nandcsid""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Parser>parseInfo,"{subsubtestname=""Read-FCE_Parse""}",,,,,,,,"Parse and create FCE[i] records"
,"+{Name=""NAND_""}",,,,,,,,
,"+{Input=nandcsid_resp}",,,,,,,,
,"+{isFCEKey=""YES""}",,,,,,,,
,"+{bit=""9;4""}",,,,,,,,
,"+{pattern=""(FCE%d = 0x%w*)""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>parseWithRegexString,"{subsubtestname=""Read-NAND_ID""}",,,,,,,,"Read NAND Id"
,"+{pattern=""FCE0%s*=%s*([0-9A-Za-z]+)""}",,,,,,,,
,"+{attribute=""NAND_ID""}",,,,,,,,
,"+{Input=nandcsid_resp}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>parseWithRegexString,"{subsubtestname=""Read-NAND_CS""}",,,,,,,,"Read NAND CS"
,"+{pattern=""NANDCS%s*%=%s*([0-9A-Za-z=]+)""}",,,,,,,,
,"+{attribute=""NAND_CS""}",,,,,,,,
,"+{Input=nandcsid_resp}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/DUTCmd>sendCmdAndParse,"{subsubtestname=""Read-NAND_Vendor""}",nand_vendor,,,,,,,"Read NAND Vendor"
,"+{pattern=""Vendor:%s+([A-Za-z]+)""}",NANDInfoTool_resp,,,,,,,
,"+{dutPluginName=""Kis_dut""}",,,,,,,,
,"+{channelPluginName=""Kis_channelPlugin""}",,,,,,,,
,"+{attribute=""NAND_VENDOR""}",,,,,,,,
,"+{Timeout=""10""}",,,,,,,,
,"+{Commands=""NANDInfoTool""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>parseWithRegexString,"{subsubtestname=""Read-NAND_Capacity""}",NAND_Capacity,,,,,,,"Read NAND Capacity"
,"+{pattern=""Capacity:%s+([0-9]+GB)""}",,,,,,,,
,"+{attribute=""NAND_CAPACITY""}",,,,,,,,
,"+{Input=NANDInfoTool_resp}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>parseWithRegexString,"{subsubtestname=""Read-NAND_Die_Name""}",,,,,,,,"Read NAND Die Name"
,"+{pattern=""Die Name:%s+([0-9A-Za-z_]+)""}",,,,,,,,
,"+{attribute=""NAND_Die_Name""}",,,,,,,,
,"+{Input=NANDInfoTool_resp}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>parseWithRegexString,"{subsubtestname=""Read-Chip_ID""}",NAND_Chip_ID,,,,,,,"Read NAND Chip ID"
,"+{pattern=""Chip ID:%s+([0-9A-Za-z]+)""}",,,,,,,,
,"+{attribute=""NAND_Chip_ID""}",,,,,,,,
,"+{Input=NANDInfoTool_resp}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>parseWithRegexString,"{subsubtestname=""Read-NAND_Cell_Type""}",,,,,,,,"Read NAND Cell Type"
,"+{pattern=""Cell Type:%s+([A-Za-z]+)""}",,,,,,,,
,"+{attribute=""NAND_Cell_Type""}",,,,,,,,
,"+{Input=NANDInfoTool_resp}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>parseWithRegexString,"{subsubtestname=""Read-Prod_FW_Version""}",,,,,,,,"Read NAND PRODUCTION FW_VERSION "
,"+{pattern=""Prod FW Version:%s+([0-9%.]+)""}",,,,,,,,
,"+{attribute=""NAND_PRODUCTION_FW_VERSION""}",,,,,,,,
,"+{Input=NANDInfoTool_resp}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>parseWithRegexString,"{subsubtestname=""Read-NAND_Controller_Type""}",NAND_Chip_ID,,,,,,,"Read NAND Chip ID"
,"+{pattern=""Chip ID:%s+([0-9A-Za-z]+)""}",,,,,,,,
,"+{attribute=""NAND_Controller_Type""}",,,,,,,,
,"+{Input=NANDInfoTool_resp}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/DUTCmd>sendCmdAndParse,"{subsubtestname=""Send-Controller_UID_CMD""}",controller_uid,,,,,,,"NAND csid"
,"+{dutPluginName=""Kis_dut""}",,,,,,,,
,"+{channelPluginName=""Kis_channelPlugin""}",,,,,,,,
,"+{Timeout=""10""}",,,,,,,,
,"+{Commands=""ASPTool --controller_uid""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Parser>parseFCE,"{subsubtestname=""Read-Parse_Controller_UID""}",,,,,,,,"Parse and create FCE[i] records"
,"+{Input=controller_uid}",,,,,,,,
,"+{parseKey=""Controller_UID""}",,,,,,,,
,"+{pattern=""%p(%d+)%p controller_uid (0x[0-9A-F]+)""}",,,,,,,,
,"+{attribute=""NAND_Controller_UID""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/DUTCmd>sendCmdAndParse,"{subsubtestname=""Send-PCIE_Link_Status_CMD""}",,,,,,,,"PCIE Link Status"
,"+{dutPluginName=""Kis_dut""}",,,,,,,,
,"+{channelPluginName=""Kis_channelPlugin""}",,,,,,,,
,"+{Timeout=""10""}",,,,,,,,
,"+{Commands=""nand --debugread 0xA06""}",,,,,,,,
,"+{expect=""OK""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/DUTCmd>sendCmdAndParse,"{subsubtestname=""Send-MCP_Boot_Mode_CMD""}",,,,,,,,"MCP Boot Mode"
,"+{dutPluginName=""Kis_dut""}",,,,,,,,
,"+{channelPluginName=""Kis_channelPlugin""}",,,,,,,,
,"+{Timeout=""10""}",,,,,,,,
,"+{Commands=""ASPTool --mspBootInfo""}",,,,,,,,
,"+{expect=""OK""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/DUTCmd>sendCmdAndParse,"{subsubtestname=""Read-MCP_ID""}",mcp_id,,,,,,,"MCP ID"
,"+{dutPluginName=""Kis_dut""}",,,,,,,,
,"+{channelPluginName=""Kis_channelPlugin""}",,,,,,,,
,"+{Timeout=""10""}",,,,,,,,
,"+{Commands=""ASPTool --mcpId""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Parser>parseFCE,"{subsubtestname=""Read-Parse_MCP_ID""}",,,,,,,,"Parse and create FCE[i] records"
,"+{Input=mcp_id}",,,,,,,,
,"+{parseKey=""MCP_ID""}",,,,,,,,
,"+{pattern=""MCP%s*(%d+):.-MCP%s*ID=(0x[0-9A-F]+)""}",,,,,,,,
,"+{attribute=""NAND_MCP_ID""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/DUTCmd>sendCmdAndParse,"{subsubtestname=""Send-NAND_CMD""}",nand_model_number,,,,,,,"Send NAND Model CMD"
,"+{dutPluginName=""Kis_dut""}",nandgetidentify_resp,,,,,,,
,"+{channelPluginName=""Kis_channelPlugin""}",,,,,,,,
,"+{Timeout=""10""}",,,,,,,,
,"+{Commands=""nand --get Identify""}",,,,,,,,
,"+{expect=""OK""}",,,,,,,,
,"+{NotDiagsTriage=""YES""}",,,,,,,,
,"+{errorCheck=""NO""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>parseWithRegexString,"{subsubtestname=""Read-NAND_Model_Number""}",,,,,,,,"Read NAND Model Number"
,"+{pattern=""Model number%s+:%s+(%w+%s+%w+%s+%w+)""}",,,,,,,,
,"+{attribute=""NAND_Model_Number""}",,,,,,,,
,"+{Input=nandgetidentify_resp}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>parseWithRegexString,"{subsubtestname=""Read-NAND_FW_Revision""}",,,,,,,,"Read NAND FW Revision"
,"+{pattern=""Firmware version%s+%: ([0-9.]+)""}",,,,,,,,
,"+{attribute=""NAND_FW_Revision""}",,,,,,,,
,"+{Input=nandgetidentify_resp}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>parseWithRegexString,"{subsubtestname=""Read-NAND_MSP_Revision""}",,,,,,,,"Read NAND MSP Revision"
,"+{pattern=""MSP revision%s+: ([0-9%.]+)""}",,,,,,,,
,"+{attribute=""NAND_MSP_Revision""}",,,,,,,,
,"+{Input=nandgetidentify_resp}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/DUTCmd>sendCmdAndParse,"{subsubtestname=""Send-NAND_SIZE_RUN_CMD""}",nandsize_resp,,,,,,,"Send NAND SIZE CMD"
,"+{dutPluginName=""Kis_dut""}",,,,,,,,
,"+{channelPluginName=""Kis_channelPlugin""}",,,,,,,,
,"+{Timeout=""5""}",,,,,,,,
,"+{Commands=""nandsize""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Compare>getNandSizeFromUartLog,"{subsubtestname=""Read-NAND_Size""}",NAND_SIZE,,,,,,,"Read NAND_SIZE=value*1024/1e9"
,"+{attribute=""NAND_SIZE""}",,,,,,,,
,"+{logFile=""kis_usb.log""}",,,,,,,,
,"+{isCreateRecord=""YES""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Compare>versionCompare,"{subsubtestname=""Compare-EEEE_CODE""}",,,,,,BOARD_ID=="0x0B",,"Compare EEEE CODE diag and local"
,"+{comparekey=""EEEE_CODE""}",,,,,,,,
,"+{compareFunc=""eeeecodeCompare""}",,,,,,,,
,"+{Input=""kis_usb.log""}",,,,,,,,
,"+{NAND_Capacity=NAND_Capacity}",,,,,,,,
,"+{pattern="".*,ASSY,%u%u(%u)""}",,,,,,,,
,"+{sfc_url=sfc_url}",,,,,,,,
,"+{MLB_Num=MLB_Num}",,,,,,,,
,"+{BOARD_ID=BOARD_ID}",,,,,,,,
,"+{MEMORY_SIZE=MEMORY_SIZE}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/DUTCmd>sendCmdAndParse,"{subsubtestname=""Send-ACC0_Harvest_Mem_CMD""}",acc0,,,,,,,"check which PCPU core is enable,rdar://111719032"
,"+{dutPluginName=""Kis_dut""}",,,,,,,,
,"+{channelPluginName=""Kis_channelPlugin""}",,,,,,,,
,"+{Commands=""memrw --32 0x3882c8014""}",,,,,,,,
,"+{pattern=""0x3882C8014:%s+(0x[0-9A-Za_-z-.]+)""}",,,,,,,,
,"+{Timeout=""10""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Parser>parseNumberWithIndex,"{subsubtestname=""Read-ACC0_All_Harvest""}",acc0_harvest,,,,,,,"combine 8~11,8~11 and 16~19 only have 1x core is 1, other must be 0"
,"+{dutPluginName=""Kis_dut""}",,,,,,,,
,"+{channelPluginName=""Kis_channelPlugin""}",,,,,,,,
,"+{Input=acc0}",,,,,,,,
,"+{Index=""8""}",,,,,,,,
,"+{endIndex=""11""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/DUTCmd>sendCmdAndParse,"{subsubtestname=""Send-ACC1_Harvest_Mem_CMD""}",acc1,,,,,,,"check which PCPU core is enable,rdar://111719032"
,"+{dutPluginName=""Kis_dut""}",,,,,,,,
,"+{channelPluginName=""Kis_channelPlugin""}",,,,,,,,
,"+{Commands=""memrw --32 0x3882bc258""}",,,,,,,,
,"+{pattern=""0x3882BC258:%s+(0x[0-9A-Za_-z-.]+)""}",,,,,,,,
,"+{Timeout=""10""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Parser>parseNumberWithIndex,"{subsubtestname=""Read-ACC1_All_Harvest""}",acc1_harvest,,,,,,,"combine 8~11,8~11 and 16~19 only have 1x core is 1, other must be 0"
,"+{dutPluginName=""Kis_dut""}",,,,,,,,
,"+{channelPluginName=""Kis_channelPlugin""}",,,,,,,,
,"+{Input=acc1}",,,,,,,,
,"+{Index=""16""}",,,,,,,,
,"+{endIndex=""19""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Sbin>getPcore,"{subsubtestname=""Read-Pcore""}",Pcore,,,,,,,"combine 8~11,8~11 and 16~19 only have 1x core is 1, other must be 0"
,"+{attribute=""PCore""}",,,,,,,,
,"+{acc0Value=acc0_harvest}",,,,,,,,
,"+{acc1Value=acc1_harvest}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/Common>parseWithRegexString,"{subsubtestname=""Get-Pcore_status""}",Pcore_status,,,,,,,"Read NAND MSP Revision"
,"+{isCombine=""YES""}",,,,,,,,
,"+{startString=Pcore}",,,,,,,,
,"+{InputValue2=""Pcore""}",,,,,,,,
,"+{Input=""P""}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Tech/SBin>compareBinFuseConfig,"{subsubtestname=""Compare-Bin_Fuse_read-Bin_Fuse_Set""}",,,,,,,,"Follow rdar://118964388"
,"+{binFuseConfigFiles=""/Users/gdlocal/Library/Atlas2/Assets/BinFuseConfig/BinFuseConfig.csv""}",,,,,,,,
,"+{binValue=SbinKey}",,,,,,,,
,"+{fuseRev=fuse_rev}",,,,,,,,
,"+{binFuse=bin_fuse}",,,,,,,,
,"+{dramSize=MEMORY_SIZE}",,,,,,,,
,"+{Pcore=Pcore_status}",,,,,,,,
,"+{nandSize=NAND_SIZE}",,,,,,,,
,"+{record=""false""}",,,,,,,,
Returns,NAND_Total_Controller_Count,,,,,,,,
,NAND_Chip_ID,,,,,,,,